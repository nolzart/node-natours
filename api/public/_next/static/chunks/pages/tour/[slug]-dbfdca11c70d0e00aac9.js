_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[14],{"/KZr":function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tour/[slug]",function(){return n("WrLg")}])},"20a2":function(e,t,n){e.exports=n("nOHt")},"8OQS":function(e,t){e.exports=function(e,t){if(null==e)return{};var n,i,c={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(c[n]=e[n]);return c}},Aiso:function(e,t,n){e.exports=n("dQHF")},UWYU:function(e,t,n){"use strict";t.__esModule=!0,t.imageConfigDefault=t.VALID_LOADERS=void 0;t.VALID_LOADERS=["default","imgix","cloudinary","akamai"];t.imageConfigDefault={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",domains:[]}},WrLg:function(e,t,n){"use strict";n.r(t);var i=n("o0o1"),c=n.n(i),a=n("HaE+"),s=n("nKUr"),o=n("YFqc"),r=n.n(o),l=(n("Aiso"),n("g4pe")),d=n.n(l),u=n("q1tI"),b=n("/MKj"),m=n("20a2"),j=(n("rG3h"),function(e){var t=e.locations;return Object(u.useEffect)((function(){var e=window.mapboxgl;e.accessToken="pk.eyJ1Ijoibm9semFydCIsImEiOiJja2hhcmYyOGEwOGtsMnluOHZwZTJ2NXFlIn0.HPmAIutT5cIh1Hs3BiAphg";var n=new e.Map({container:"map",style:"mapbox://styles/nolzart/ckharx96i0cn519oba4bgxy6t"}),i=new e.LngLatBounds;t.forEach((function(t){var c=document.createElement("div");c.className="marker",new e.Marker({element:c,anchor:"bottom"}).setLngLat(t.coordinates).addTo(n),new e.Popup({offset:30}).setLngLat(t.coordinates).setHTML("<p>Day ".concat(t.day,": ").concat(t.description,"</p>")).addTo(n),i.extend(t.coordinates)})),n.fitBounds(i,{padding:{top:200,bottom:140,left:100,right:100}})}),[]),Object(s.jsx)("div",{id:"map"})}),v=n("rKdZ"),h=n("vDqi"),x=n.n(h),g=function(){var e=Object(a.a)(c.a.mark((function e(t,n){var i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("/api/v1/bookings/checkout-session/".concat(t));case 3:return i=e.sent,e.next=6,n.redirectToCheckout({sessionId:i.data.session.id});case 6:e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),p=n("MUSN"),f=function(e){var t=e.review;return Object(s.jsxs)("div",{className:"reviews__card",children:[Object(s.jsxs)("div",{className:"reviews__avatar",children:[Object(s.jsx)("img",{src:"/img/users/".concat(t.user.photo),alt:"".concat(t.user.name),className:"reviews__avatar-img"}),Object(s.jsx)("h6",{className:"reviews__user",children:t.user.name})]}),Object(s.jsx)("p",{className:"reviews__text",children:t.review}),Object(s.jsx)("div",{className:"reviews__rating",children:[1,2,3,4,5].map((function(e){return Object(s.jsx)("svg",{className:"reviews__star reviews__star--".concat(t.rating>=e?"active":"inactive"),dangerouslySetInnerHTML:{__html:'<use xlink:href="/img/icons.svg#icon-star" />'}},"start-".concat(e))}))})]})},_=function(e){var t=e.imageCover,n=e.name;return Object(s.jsxs)("div",{className:"header__hero",children:[Object(s.jsx)("div",{className:"header__hero-overlay",children:"\xa0"}),Object(s.jsx)("img",{src:"/img/tours/".concat(t),alt:n,className:"header__hero-img"})]})},O=function(e){var t=e.guide;return Object(s.jsxs)("div",{className:"overview-box__detail",children:[Object(s.jsx)("img",{src:"/img/users/".concat(t.photo),alt:"".concat(t.role),className:"overview-box__img"}),Object(s.jsx)("span",{className:"overview-box__label",children:"lead-guide"===t.role?"Lead Guide":"Guide"}),Object(s.jsx)("span",{className:"overview-box__text",children:t.name})]})},w=function(e){var t=e.icon,n=e.classContainer,i=e.classSvg,c=e.children;return Object(s.jsxs)("div",{className:n,children:[Object(s.jsx)("svg",{dangerouslySetInnerHTML:{__html:'<use xlink:href="/img/icons.svg#icon-'.concat(t,'" />')},className:i}),c]})},y=function(){var e=Object(b.c)((function(e){return e.tour})).tour,t=Object(b.c)((function(e){return e.auth})).isAuthenticated,n=Object(b.b)(),i=function(){var e=Object(u.useState)(""),t=e[0],n=e[1];return Object(u.useEffect)((function(){n(window.Stripe("pk_test_51HnrF2KyEVMDo9Wn6KEslURceFslGebjrSODFs03WIqCuwsZeVKKZ3OWtR3wpnyzZnqFLdlc6jImGCPdVppmF6ON00NAZU5OLi"))}),[]),t}(),c=Object(m.useRouter)().query.slug,a=Object(u.useCallback)((function(e){return n(p.b(e))}),[n]);return Object(u.useEffect)((function(){return a(c)}),[c,a]),0===Object.entries(e).length?Object(s.jsx)(v.a,{}):Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(d.a,{children:Object(s.jsx)("title",{children:"Tour | ".concat(e.name)})}),Object(s.jsxs)("section",{className:"section-header",children:[Object(s.jsx)(_,{imageCover:e.imageCover,name:e.name}),Object(s.jsxs)("div",{className:"heading-box",children:[Object(s.jsx)("h1",{className:"heading-primary",children:Object(s.jsx)("span",{children:e.name})}),Object(s.jsxs)("div",{className:"heading-box__group",children:[Object(s.jsx)(w,{icon:"clock",classContainer:"heading-box__detail",classSvg:"heading-box__icon",children:Object(s.jsx)("span",{className:"heading-box__text",children:"".concat(e.duration," days")})}),Object(s.jsx)(w,{icon:"map-pin",classContainer:"heading-box__detail",classSvg:"heading-box__icon",children:Object(s.jsx)("span",{className:"heading-box__text",children:e.startLocation.description})})]})]})]}),Object(s.jsxs)("section",{className:"section-description",children:[Object(s.jsx)("div",{className:"overview-box",children:Object(s.jsxs)("div",{children:[Object(s.jsxs)("div",{className:"overview-box__group",children:[Object(s.jsx)("h2",{className:"heading-secondary ma-bt-lg",children:"Quick facts"}),Object(s.jsxs)(w,{icon:"calendar",classContainer:"overview-box__detail",classSvg:"overview-box__icon",children:[Object(s.jsx)("span",{className:"overview-box__label",children:"Next date"}),Object(s.jsx)("span",{className:"overview-box__text",children:new Date(e.startDates[0]).toLocaleString("en-us",{month:"long",year:"numeric"})})]}),Object(s.jsxs)(w,{icon:"trending-up",classContainer:"overview-box__detail",classSvg:"overview-box__icon",children:[Object(s.jsx)("span",{className:"overview-box__label",children:"Difficulty"}),Object(s.jsx)("span",{className:"overview-box__text",children:e.difficulty})]}),Object(s.jsxs)(w,{icon:"user",classContainer:"overview-box__detail",classSvg:"overview-box__icon",children:[Object(s.jsx)("span",{className:"overview-box__label",children:"Participants"}),Object(s.jsx)("span",{className:"overview-box__text",children:"".concat(e.maxGroupSize," People")})]}),Object(s.jsxs)(w,{icon:"star",classContainer:"overview-box__detail",classSvg:"overview-box__icon",children:[Object(s.jsx)("span",{className:"overview-box__label",children:"Rating"}),Object(s.jsx)("span",{className:"overview-box__text",children:"".concat(e.ratingsAverage," / 5")})]})]}),Object(s.jsxs)("div",{className:"overview-box__group",children:[Object(s.jsx)("h2",{className:"heading-secondary ma-bt-lg",children:"Your tour guides"}),e.guides&&e.guides.map((function(e){return Object(s.jsx)(O,{guide:e},e.id)}))]})]})}),Object(s.jsxs)("div",{className:"description-box",children:[Object(s.jsx)("h2",{className:"heading-secondary ma-bt-lg",children:"About ".concat(e.name," tour")}),e.description.split(["\n"]).map((function(e,t){return Object(s.jsx)("p",{className:"description__text",children:e},"paragraph-".concat(t))}))]})]}),Object(s.jsx)("section",{className:"section-pictures",children:e.images&&e.images.map((function(t,n){return Object(s.jsx)("div",{className:"picture-box",children:Object(s.jsx)("img",{src:"/img/tours/".concat(t),alt:"".concat(e.name," Tour ").concat(n+1),className:"picture-box__img picture-box__img--".concat(n+1)})},"tour-image-".concat(n))}))}),Object(s.jsx)("section",{className:"section-map",children:Object(s.jsx)(j,{locations:e.locations})}),Object(s.jsx)("section",{className:"section-reviews",children:Object(s.jsx)("div",{className:"reviews",children:e.reviews&&e.reviews.map((function(e){return Object(s.jsx)(f,{review:e},e.id)}))})}),Object(s.jsx)("section",{className:"section-cta",children:Object(s.jsxs)("div",{className:"cta",children:[Object(s.jsx)("div",{className:"cta__img cta__img--logo",children:Object(s.jsx)("img",{src:"/img/logo-white.png",alt:"Natours logo"})}),Object(s.jsx)("img",{src:"/img/tours/".concat(e.images[1]),alt:"".concat(e.name," Picture"),className:"cta__img cta__img--1"}),Object(s.jsx)("img",{src:"/img/tours/".concat(e.images[2]),alt:"".concat(e.name," Picture"),className:"cta__img cta__img--2"}),Object(s.jsxs)("div",{className:"cta__content",children:[Object(s.jsx)("h2",{className:"heading__secondary",children:"WHAT ARE YOU WAITING FOR?"}),Object(s.jsx)("p",{className:"cta__text",children:"".concat(e.duration," days. 1 adventure. Infinite memories. Make it yours today!")}),t?Object(s.jsx)("button",{className:"btn btn--green span-all-rows",id:"book-tour",type:"button",onClick:function(){return g(e.id,i)},children:"Book tour now!"}):Object(s.jsx)(r.a,{href:"Login",children:Object(s.jsx)("a",{className:"btn btn--green span-all-rows",children:"Log in to book a tour!"})})]})]})})]})};y.getInitialProps=function(){var e=Object(a.a)(c.a.mark((function e(t){var n,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.store,t.req,i=t.query,e.next=3,n.dispatch(p.b(i.slug));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.default=y},dEHY:function(e,t,n){"use strict";t.__esModule=!0,t.toBase64=function(e){return window.btoa(e)}},dQHF:function(e,t,n){"use strict";var i=n("J4zp"),c=n("RIqP"),a=n("TqRt");t.__esModule=!0,t.default=function(e){var t=e.src,n=e.sizes,a=e.unoptimized,o=void 0!==a&&a,d=e.priority,b=void 0!==d&&d,m=e.loading,v=e.className,h=e.quality,x=e.width,_=e.height,O=e.objectFit,w=e.objectPosition,y=(0,s.default)(e,["src","sizes","unoptimized","priority","loading","className","quality","width","height","objectFit","objectPosition"]),N=n?"responsive":"intrinsic",A=!1;"unsized"in y?(A=Boolean(y.unsized),delete y.unsized):"layout"in y&&(y.layout&&(N=y.layout),delete y.layout);0;var k=!b&&("lazy"===m||"undefined"===typeof m);t&&t.startsWith("data:")&&(o=!0,k=!1);var S,z,E,L=(0,u.useIntersection)({rootMargin:"200px",disabled:!k}),I=i(L,2),q=I[0],C=I[1],D=!k||C,H=f(x),T=f(_),P=f(h),F={visibility:D?"visible":"hidden",position:"absolute",top:0,left:0,bottom:0,right:0,boxSizing:"border-box",padding:0,border:"none",margin:"auto",display:"block",width:0,height:0,minWidth:"100%",maxWidth:"100%",minHeight:"100%",maxHeight:"100%",objectFit:O,objectPosition:w};if("undefined"!==typeof H&&"undefined"!==typeof T&&"fill"!==N){var M=T/H,R=isNaN(M)?"100%":"".concat(100*M,"%");"responsive"===N?(S={display:"block",overflow:"hidden",position:"relative",boxSizing:"border-box",margin:0},z={display:"block",boxSizing:"border-box",paddingTop:R}):"intrinsic"===N?(S={display:"inline-block",maxWidth:"100%",overflow:"hidden",position:"relative",boxSizing:"border-box",margin:0},z={boxSizing:"border-box",display:"block",maxWidth:"100%"},E='<svg width="'.concat(H,'" height="').concat(T,'" xmlns="http://www.w3.org/2000/svg" version="1.1"/>')):"fixed"===N&&(S={overflow:"hidden",boxSizing:"border-box",display:"inline-block",position:"relative",width:H,height:T})}else"undefined"===typeof H&&"undefined"===typeof T&&"fill"===N&&(S={display:"block",overflow:"hidden",position:"absolute",top:0,left:0,bottom:0,right:0,boxSizing:"border-box",margin:0});var W={src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"};D&&(W=function(e){var t=e.src,n=e.unoptimized,i=e.layout,a=e.width,s=e.quality,o=e.sizes;if(n)return{src:t};var r=function(e,t){if("number"!==typeof e||"fill"===t||"responsive"===t)return{widths:j,kind:"w"};return{widths:c(new Set([e,2*e,3*e].map((function(e){return g.find((function(t){return t>=e}))||g[g.length-1]})))),kind:"x"}}(a,i),l=r.widths,d=r.kind,u=l.length-1,b=l.map((function(e,n){return"".concat(p({src:t,quality:s,width:e})," ").concat("w"===d?e:n+1).concat(d)})).join(", ");o||"w"!==d||(o="100vw");return{src:t=p({src:t,quality:s,width:l[u]}),sizes:o,srcSet:b}}({src:t,unoptimized:o,layout:N,width:H,quality:P,sizes:n}));A&&(S=void 0,z=void 0,F=void 0);return r.default.createElement("div",{style:S},z?r.default.createElement("div",{style:z},E?r.default.createElement("img",{style:{maxWidth:"100%",display:"block"},alt:"","aria-hidden":!0,role:"presentation",src:"data:image/svg+xml;base64,".concat((0,l.toBase64)(E))}):null):null,r.default.createElement("img",Object.assign({},y,W,{decoding:"async",className:v,ref:q,style:F})))};var s=a(n("8OQS")),o=a(n("pVnL")),r=a(n("q1tI")),l=n("dEHY"),d=n("UWYU"),u=n("vNVm");var b=new Map([["imgix",function(e){var t=e.root,n=e.src,i=e.width,c=e.quality,a=["auto=format","fit=max","w="+i],s="";c&&a.push("q="+c);a.length&&(s="?"+a.join("&"));return"".concat(t).concat(_(n)).concat(s)}],["cloudinary",function(e){var t=e.root,n=e.src,i=e.width,c=e.quality,a=["f_auto","c_limit","w_"+i,"q_"+(c||"auto")].join(",")+"/";return"".concat(t).concat(a).concat(_(n))}],["akamai",function(e){var t=e.root,n=e.src,i=e.width;return"".concat(t).concat(_(n),"?imwidth=").concat(i)}],["default",function(e){var t=e.root,n=e.src,i=e.width,c=e.quality;0;return"".concat(t,"?url=").concat(encodeURIComponent(n),"&w=").concat(i,"&q=").concat(c||75)}]]),m={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image/",loader:"imgix"}||d.imageConfigDefault,j=m.deviceSizes,v=m.imageSizes,h=m.loader,x=m.path,g=(m.domains,[].concat(c(j),c(v)));function p(e){var t=b.get(h);if(t)return t((0,o.default)({root:x},e));throw new Error('Unknown "loader" found in "next.config.js". Expected: '.concat(d.VALID_LOADERS.join(", "),". Received: ").concat(h))}function f(e){return"number"===typeof e?e:"string"===typeof e?parseInt(e,10):void 0}function _(e){return"/"===e[0]?e.slice(1):e}j.sort((function(e,t){return e-t})),g.sort((function(e,t){return e-t}))},pVnL:function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},n.apply(this,arguments)}e.exports=n},rG3h:function(e,t,n){},rKdZ:function(e,t,n){"use strict";var i=n("nKUr"),c=n("q1tI");t.a=function(){return Object(c.useEffect)((function(){return document.querySelector("body").classList.add("ov-hidden"),function(){return document.querySelector("body").classList.remove("ov-hidden")}})),Object(i.jsxs)("div",{className:"lds-ring",children:[Object(i.jsx)("div",{}),Object(i.jsx)("div",{}),Object(i.jsx)("div",{}),Object(i.jsx)("div",{})]})}}},[["/KZr",1,2,0,3,5]]]);