_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[14],{"/KZr":function(e,c,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tour/[slug]",function(){return t("WrLg")}])},"20a2":function(e,c,t){e.exports=t("nOHt")},WrLg:function(e,c,t){"use strict";t.r(c);var s=t("o0o1"),n=t.n(s),a=t("HaE+"),i=t("nKUr"),r=t("YFqc"),o=t.n(r),l=t("g4pe"),d=t.n(l),j=t("q1tI"),u=t("/MKj"),b=t("20a2"),m=(t("rG3h"),function(e){var c=e.locations;return Object(j.useEffect)((function(){var e=window.mapboxgl;e.accessToken="pk.eyJ1Ijoibm9semFydCIsImEiOiJja2hhcmYyOGEwOGtsMnluOHZwZTJ2NXFlIn0.HPmAIutT5cIh1Hs3BiAphg";var t=new e.Map({container:"map",style:"mapbox://styles/nolzart/ckharx96i0cn519oba4bgxy6t"}),s=new e.LngLatBounds;c.forEach((function(c){var n=document.createElement("div");n.className="marker",new e.Marker({element:n,anchor:"bottom"}).setLngLat(c.coordinates).addTo(t),new e.Popup({offset:30}).setLngLat(c.coordinates).setHTML("<p>Day ".concat(c.day,": ").concat(c.description,"</p>")).addTo(t),s.extend(c.coordinates)})),t.fitBounds(s,{padding:{top:200,bottom:140,left:100,right:100}})}),[]),Object(i.jsx)("div",{id:"map"})}),x=t("rKdZ"),v=t("vDqi"),h=t.n(v),_=function(){var e=Object(a.a)(n.a.mark((function e(c,t){var s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.get("/api/v1/bookings/checkout-session/".concat(c));case 3:return s=e.sent,e.next=6,t.redirectToCheckout({sessionId:s.data.session.id});case 6:e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(c,t){return e.apply(this,arguments)}}(),g=t("MUSN"),O=function(e){var c=e.review;return Object(i.jsxs)("div",{className:"reviews__card",children:[Object(i.jsxs)("div",{className:"reviews__avatar",children:[Object(i.jsx)("img",{src:"/img/users/".concat(c.user.photo),alt:"".concat(c.user.name),className:"reviews__avatar-img"}),Object(i.jsx)("h6",{className:"reviews__user",children:c.user.name})]}),Object(i.jsx)("p",{className:"reviews__text",children:c.review}),Object(i.jsx)("div",{className:"reviews__rating",children:[1,2,3,4,5].map((function(e){return Object(i.jsx)("svg",{className:"reviews__star reviews__star--".concat(c.rating>=e?"active":"inactive"),dangerouslySetInnerHTML:{__html:'<use xlink:href="/img/icons.svg#icon-star" />'}},"start-".concat(e))}))})]})},p=function(e){var c=e.imageCover,t=e.name;return Object(i.jsxs)("div",{className:"header__hero",children:[Object(i.jsx)("div",{className:"header__hero-overlay",children:"\xa0"}),Object(i.jsx)("img",{src:"/img/tours/".concat(c),alt:t,className:"header__hero-img"})]})},w=function(e){var c=e.guide;return Object(i.jsxs)("div",{className:"overview-box__detail",children:[Object(i.jsx)("img",{src:"/img/users/".concat(c.photo),alt:"".concat(c.role),className:"overview-box__img"}),Object(i.jsx)("span",{className:"overview-box__label",children:"lead-guide"===c.role?"Lead Guide":"Guide"}),Object(i.jsx)("span",{className:"overview-box__text",children:c.name})]})},N=function(e){var c=e.icon,t=e.classContainer,s=e.classSvg,n=e.children;return Object(i.jsxs)("div",{className:t,children:[Object(i.jsx)("svg",{dangerouslySetInnerHTML:{__html:'<use xlink:href="/img/icons.svg#icon-'.concat(c,'" />')},className:s}),n]})},f=function(){var e=Object(u.c)((function(e){return e.tour})).tour,c=Object(u.c)((function(e){return e.auth})).isAuthenticated,t=Object(u.b)(),s=function(){var e=Object(j.useState)(""),c=e[0],t=e[1];return Object(j.useEffect)((function(){t(window.Stripe("pk_test_51HnrF2KyEVMDo9Wn6KEslURceFslGebjrSODFs03WIqCuwsZeVKKZ3OWtR3wpnyzZnqFLdlc6jImGCPdVppmF6ON00NAZU5OLi"))}),[]),c}(),n=Object(b.useRouter)().query.slug,a=Object(j.useCallback)((function(e){return t(g.b(e))}),[t]);return Object(j.useEffect)((function(){return a(n)}),[n,a]),0===Object.entries(e).length?Object(i.jsx)(x.a,{}):Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(d.a,{children:Object(i.jsx)("title",{children:"Tour | ".concat(e.name)})}),Object(i.jsxs)("section",{className:"section-header",children:[Object(i.jsx)(p,{imageCover:e.imageCover,name:e.name}),Object(i.jsxs)("div",{className:"heading-box",children:[Object(i.jsx)("h1",{className:"heading-primary",children:Object(i.jsx)("span",{children:e.name})}),Object(i.jsxs)("div",{className:"heading-box__group",children:[Object(i.jsx)(N,{icon:"clock",classContainer:"heading-box__detail",classSvg:"heading-box__icon",children:Object(i.jsx)("span",{className:"heading-box__text",children:"".concat(e.duration," days")})}),Object(i.jsx)(N,{icon:"map-pin",classContainer:"heading-box__detail",classSvg:"heading-box__icon",children:Object(i.jsx)("span",{className:"heading-box__text",children:e.startLocation.description})})]})]})]}),Object(i.jsxs)("section",{className:"section-description",children:[Object(i.jsx)("div",{className:"overview-box",children:Object(i.jsxs)("div",{children:[Object(i.jsxs)("div",{className:"overview-box__group",children:[Object(i.jsx)("h2",{className:"heading-secondary ma-bt-lg",children:"Quick facts"}),Object(i.jsxs)(N,{icon:"calendar",classContainer:"overview-box__detail",classSvg:"overview-box__icon",children:[Object(i.jsx)("span",{className:"overview-box__label",children:"Next date"}),Object(i.jsx)("span",{className:"overview-box__text",children:new Date(e.startDates[0]).toLocaleString("en-us",{month:"long",year:"numeric"})})]}),Object(i.jsxs)(N,{icon:"trending-up",classContainer:"overview-box__detail",classSvg:"overview-box__icon",children:[Object(i.jsx)("span",{className:"overview-box__label",children:"Difficulty"}),Object(i.jsx)("span",{className:"overview-box__text",children:e.difficulty})]}),Object(i.jsxs)(N,{icon:"user",classContainer:"overview-box__detail",classSvg:"overview-box__icon",children:[Object(i.jsx)("span",{className:"overview-box__label",children:"Participants"}),Object(i.jsx)("span",{className:"overview-box__text",children:"".concat(e.maxGroupSize," People")})]}),Object(i.jsxs)(N,{icon:"star",classContainer:"overview-box__detail",classSvg:"overview-box__icon",children:[Object(i.jsx)("span",{className:"overview-box__label",children:"Rating"}),Object(i.jsx)("span",{className:"overview-box__text",children:"".concat(e.ratingsAverage," / 5")})]})]}),Object(i.jsxs)("div",{className:"overview-box__group",children:[Object(i.jsx)("h2",{className:"heading-secondary ma-bt-lg",children:"Your tour guides"}),e.guides&&e.guides.map((function(e){return Object(i.jsx)(w,{guide:e},e.id)}))]})]})}),Object(i.jsxs)("div",{className:"description-box",children:[Object(i.jsx)("h2",{className:"heading-secondary ma-bt-lg",children:"About ".concat(e.name," tour")}),e.description.split(["\n"]).map((function(e,c){return Object(i.jsx)("p",{className:"description__text",children:e},"paragraph-".concat(c))}))]})]}),Object(i.jsx)("section",{className:"section-pictures",children:e.images&&e.images.map((function(c,t){return Object(i.jsx)("div",{className:"picture-box",children:Object(i.jsx)("img",{src:"/img/tours/".concat(c),alt:"".concat(e.name," Tour ").concat(t+1),className:"picture-box__img picture-box__img--".concat(t+1)})},"tour-image-".concat(t))}))}),Object(i.jsx)("section",{className:"section-map",children:Object(i.jsx)(m,{locations:e.locations})}),Object(i.jsx)("section",{className:"section-reviews",children:Object(i.jsx)("div",{className:"reviews",children:e.reviews&&e.reviews.map((function(e){return Object(i.jsx)(O,{review:e},e.id)}))})}),Object(i.jsx)("section",{className:"section-cta",children:Object(i.jsxs)("div",{className:"cta",children:[Object(i.jsx)("div",{className:"cta__img cta__img--logo",children:Object(i.jsx)("img",{src:"/img/logo-white.png",alt:"Natours logo"})}),Object(i.jsx)("img",{src:"/img/tours/".concat(e.images[1]),alt:"".concat(e.name," Picture"),className:"cta__img cta__img--1"}),Object(i.jsx)("img",{src:"/img/tours/".concat(e.images[2]),alt:"".concat(e.name," Picture"),className:"cta__img cta__img--2"}),Object(i.jsxs)("div",{className:"cta__content",children:[Object(i.jsx)("h2",{className:"heading__secondary",children:"WHAT ARE YOU WAITING FOR?"}),Object(i.jsx)("p",{className:"cta__text",children:"".concat(e.duration," days. 1 adventure. Infinite memories. Make it yours today!")}),c?Object(i.jsx)("button",{className:"btn btn--green span-all-rows",id:"book-tour",type:"button",onClick:function(){return _(e.id,s)},children:"Book tour now!"}):Object(i.jsx)(o.a,{href:"/login",children:Object(i.jsx)("a",{className:"btn btn--green span-all-rows",children:"Log in to book a tour!"})})]})]})})]})};f.getInitialProps=function(){var e=Object(a.a)(n.a.mark((function e(c){var t,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.store,c.req,s=c.query,e.next=3,t.dispatch(g.b(s.slug));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(c){return e.apply(this,arguments)}}();c.default=f},rG3h:function(e,c,t){},rKdZ:function(e,c,t){"use strict";var s=t("nKUr"),n=t("q1tI");c.a=function(){return Object(n.useEffect)((function(){return document.querySelector("body").classList.add("ov-hidden"),function(){return document.querySelector("body").classList.remove("ov-hidden")}})),Object(s.jsxs)("div",{className:"lds-ring",children:[Object(s.jsx)("div",{}),Object(s.jsx)("div",{}),Object(s.jsx)("div",{}),Object(s.jsx)("div",{})]})}}},[["/KZr",1,2,0,3,5]]]);