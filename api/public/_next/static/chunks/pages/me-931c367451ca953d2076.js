_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[12],{"/GAX":function(e,t,s){"use strict";var a=s("nKUr");t.a=function(e){var t=e.labelContent,s=e.defaultValue,n=e.refAttribute,r=e.inputId;return Object(a.jsxs)("div",{className:"form__group",children:[Object(a.jsx)("label",{htmlFor:r,className:"form__label",children:t}),Object(a.jsx)("input",{type:"text",id:r,name:r,className:"form__input",defaultValue:s,ref:n,required:!0})]})}},j9tO:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/me",function(){return s("sLVg")}])},sLVg:function(e,t,s){"use strict";s.r(t);var a=s("nKUr"),n=s("q1tI"),r=s("/MKj"),c=s("NKCw"),i=s("g4pe"),o=s.n(i),l=function(e){var t=e.name,s=e.setPhoto,r=e.userPhoto,c=Object(n.useState)(),i=c[0],o=c[1];return Object(a.jsxs)("div",{className:"form__group form__photo-upload",children:[Object(a.jsx)("img",{src:i||"/img/users/".concat(r),alt:"User ".concat(t),className:"form__user-photo"}),Object(a.jsx)("input",{type:"file",className:"form__upload",accept:"images/*",name:"photo",id:"photo",onChange:function(e){e.preventDefault();var t=URL.createObjectURL(e.target.files[0]);s(e.target.files[0]),o(t)}}),Object(a.jsx)("label",{htmlFor:"photo",children:"Choose new photos"})]})},d=s("1b43"),u=s("9ZE6"),j=s("/GAX"),m=s("vSbG"),b=s("yclj"),h=function(e,t,s,n){return Object(a.jsx)("li",{className:"".concat(n?"side__nav--active":""),children:Object(a.jsxs)("a",{href:e,children:[Object(a.jsx)("svg",{dangerouslySetInnerHTML:{__html:'<use xlink:href="/img/icons.svg#icon-'.concat(s,'" />')}}),t]})})};t.default=function(){var e=Object(c.a)(),t=e.register,s=e.handleSubmit,i=Object(c.a)(),f=i.register,O=i.handleSubmit,p=i.reset,_=Object(r.c)((function(e){return e.auth})),g=_.user,x=_.isAuthenticated,v=Object(r.b)(),N=Object(n.useState)(""),w=N[0],C=N[1];return Object(a.jsxs)(d.a,{shouldRedirect:!0!==x,path:"/login",children:[Object(a.jsx)(o.a,{children:Object(a.jsx)("title",{children:"Natours | Your account"})}),Object(a.jsx)("main",{className:"main",children:Object(a.jsxs)("div",{className:"user-view",children:[Object(a.jsx)("input",{type:"checkbox",name:"navi-toggle",id:"navi-toggle",className:"nav__checkbox"}),Object(a.jsx)("label",{htmlFor:"navi-toggle",className:"nav__button",children:Object(a.jsx)("span",{className:"nav__icon"})}),Object(a.jsx)("nav",{className:"user-view__menu",children:Object(a.jsxs)("ul",{className:"side-nav",children:[h("#","Settings","settings",!0),h("/my-tours","My bookings","briefcase"),h("#","My reviews","star"),h("#","Billing","credit-card"),x&&"admin"===g.role&&Object(a.jsxs)("div",{className:"admin-nav",children:[Object(a.jsx)("h5",{className:"admin-nav__heading",children:"Admin"}),Object(a.jsxs)("ul",{className:"side-nav",children:[h("#","Manage users","users"),h("#","Manage reviews","star"),h("#","Manage bookings","briefcase")]})]})]})}),Object(a.jsxs)("div",{className:"user-view__content",children:[Object(a.jsxs)("div",{className:"user-view__form-container",children:[Object(a.jsx)("h2",{className:"heading-secondary ma-bt-md",children:"Tour account settings"}),Object(a.jsxs)("form",{className:"form form-user-data",onSubmit:s((function(e){w&&(e.photo=w);var t=new FormData;t.append("name",e.name),t.append("email",e.email),t.append("photo",e.photo),v(Object(b.e)(t))})),children:[Object(a.jsx)(j.a,{labelContent:"Name",inputId:"name",refAttribute:t({required:!0}),defaultValue:g.name}),Object(a.jsx)(u.a,{refAttribute:t({required:!0}),labelContent:"Email",inputId:"email",defaultValue:g.email}),Object(a.jsx)(l,{name:g.name,userPhoto:g.photo,setPhoto:C}),Object(a.jsx)("div",{className:"form__group right",children:Object(a.jsx)("button",{className:"btn btn--small btn--green",children:"Save settings"})})]})]}),Object(a.jsx)("div",{className:"line",children:"\xa0"}),Object(a.jsxs)("div",{className:"user-view__form-container",children:[Object(a.jsx)("h2",{className:"heading-secondary ma-bt-md",children:"Password change"}),Object(a.jsxs)("form",{className:"form form-user-password",onSubmit:O((function(e){v(Object(b.f)(e)),p()})),children:[Object(a.jsx)(m.a,{labelContent:"Current Password",inputId:"currentPassword",refAttribute:f({required:!0,minLength:8})}),Object(a.jsx)(m.a,{labelContent:"New Password",inputId:"password",refAttribute:f({required:!0,minLength:8})}),Object(a.jsx)(m.a,{labelContent:"Confirm Password",inputId:"passwordConfirm",refAttribute:f({required:!0,minLength:8})}),Object(a.jsx)("div",{className:"form__group",children:Object(a.jsx)("button",{className:"btn btn--small btn--green btn--password",children:"Save password"})})]})]})]})]})})]})}}},[["j9tO",1,2,0,3,4]]]);